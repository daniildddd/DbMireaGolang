# –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º: –ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –æ—Å—Ç–∞—é—â–∏–µ—Å—è —Ñ–∏–ª—å—Ç—Ä—ã

## –ü—Ä–æ–±–ª–µ–º–∞ 1: –ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ "–°—Ö–µ–º–∞ –ë–î"

### –û–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã "–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö" –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞—Å—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (Loading).

### –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞

**–§–∞–π–ª:** `frontend/src/shared/lib/hooks/useTableSchema.tsx`
**–•—É–∫:** `useCurrentTableSchema()`

```typescript
// –î–û: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ
export function useCurrentTableSchema(dependencies: any[] = []) {
	const { globalContext } = useGlobalContext()

	// globalContext.currentTable –º–æ–∂–µ—Ç –±—ã—Ç—å null!
	return useTableSchema(globalContext.currentTable, [
		...dependencies,
		globalContext.currentTable,
	])
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:**

1. –ü—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ `globalContext.currentTable === null`
2. `useTableSchema()` –æ—Ç–ø—Ä–∞–≤–ª—è–ª –∑–∞–ø—Ä–æ—Å —Å –ø—É—Å—Ç—ã–º tableName
3. Backend –≤–æ–∑–≤—Ä–∞—â–∞–ª –æ—à–∏–±–∫—É (table not found)
4. React Query –ø–æ–≤—Ç–æ—Ä—è–ª –∑–∞–ø—Ä–æ—Å
5. –ü—Ä–æ–∏—Å—Ö–æ–¥–∏–ª –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –∑–∞–ø—Ä–æ—Å–æ–≤

### –†–µ—à–µ–Ω–∏–µ

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 1: –í `useTableSchema.tsx`**

```typescript
// –ü–æ—Å–ª–µ: –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ
export default function useTableSchema(
  tableName: string,
  dependencies: any[] = []
) {
  const notifier = useNotifications();

  const { isPending, error, data } = useQuery({
    queryKey: ["tableSchema", tableName, ...dependencies],
    queryFn: () => ApiMiddleware.getTableSchema(tableName)...,
    enabled: !!tableName, // ‚Üê –û—Ç–∫–ª—é—á–∞–µ–º –∑–∞–ø—Ä–æ—Å –µ—Å–ª–∏ tableName –ø—É—Å—Ç!
  });

  return { isPending, error, data };
}

export function useCurrentTableSchema(dependencies: any[] = []) {
  const { globalContext } = useGlobalContext();

  // –ï—Å–ª–∏ currentTable –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞, –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å
  if (!globalContext.currentTable) {
    return {
      isPending: false,
      error: null,
      data: [] as main.FieldSchema[]
    };
  }

  return useTableSchema(globalContext.currentTable, [
    ...dependencies,
    globalContext.currentTable,
  ]);
}
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 2: –í `database-structure/page.tsx`**

–ò–∑–º–µ–Ω—ë–Ω –ø–æ—Ä—è–¥–æ–∫ –ª–æ–≥–∏–∫–∏:

```typescript
// –î–û: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ
export default function DatabaseStructurePage() {
	const tableNames = useTableNames()
	const currentTableSchema = useCurrentTableSchema() // ‚Üê –ó–∞–ø—Ä–æ—Å –î–û —É—Å—Ç–∞–Ω–æ–≤–∫–∏ currentTable!
	const { globalContext, setGlobalContext } = useGlobalContext()

	if (tableNames.isPending || currentTableSchema.isPending) return <Loading />

	// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–µ—Ä–≤—É—é —Ç–∞–±–ª–∏—Ü—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
	setGlobalContext({ ...globalContext, currentTable: tableNames[0] }) // ‚Üê –û—à–∏–±–∫–∞: tableNames[0]!
}

// –ü–û–°–õ–ï: –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ
export default function DatabaseStructurePage() {
	const tableNames = useTableNames()
	const { globalContext, setGlobalContext } = useGlobalContext()

	// –°–Ω–∞—á–∞–ª–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º currentTable –µ—Å–ª–∏ –Ω—É–∂–Ω–æ (–ë–ï–ó –∑–∞–ø—Ä–æ—Å–∞)
	if (
		tableNames.data &&
		tableNames.data.length > 0 &&
		!globalContext.currentTable
	) {
		setGlobalContext({ ...globalContext, currentTable: tableNames.data[0] })
	}

	// –ó–ê–¢–ï–ú —Å–æ–∑–¥–∞—ë–º —Ö—É–∫ (–æ–Ω –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π currentTable)
	const currentTableSchema = useCurrentTableSchema()

	// –¢–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏
	if (tableNames.isPending) return <Loading />
	if (currentTableSchema.isPending) return <Loading />
}
```

### –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `enabled: !!tableName` –≤ React Query –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–∏ –ø—É—Å—Ç–æ–º –∏–º–µ–Ω–∏  
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ `useCurrentTableSchema()` –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º `useTableSchema()`  
‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –ª–æ–≥–∏–∫–∏ –≤ `DatabaseStructurePage` - —Å–Ω–∞—á–∞–ª–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–±–ª–∏—Ü—É, –ø–æ—Ç–æ–º –¥–µ–ª–∞–µ–º –∑–∞–ø—Ä–æ—Å  
‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ `tableNames[0]` –Ω–∞ `tableNames.data[0]`

---

## –ü—Ä–æ–±–ª–µ–º–∞ 2: –û—Å—Ç–∞—é—â–∏–µ—Å—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (—Ñ–∏–ª—å—Ç—Ä—ã) –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É

### –û–ø–∏—Å–∞–Ω–∏–µ

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã (WHERE, GROUP BY, ORDER BY, etc.)
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª—è–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
5. –£–¥–∞–ª—ë–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã —Å–Ω–æ–≤–∞ –ø–æ—è–≤–ª—è—é—Ç—Å—è! ‚ùå

### –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞

**–§–∞–π–ª:** `frontend/src/pages/filtering/page.tsx`

```typescript
// –î–û: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ
export default function FilteringPage() {
	const [filters, setFilters] = useState<Filters>(EMPTY_FILTERS)

	return (
		<FilterContext.Provider value={{ filters, setFilters }}>
			{/* –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã */}
		</FilterContext.Provider>
	)
	// –ù–µ—Ç cleanup! –§–∏–ª—å—Ç—Ä—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:**

1. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `FilteringPage` —Å–æ–∑–¥–∞—ë—Ç state `filters`
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç/—É–¥–∞–ª—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã (–∏–∑–º–µ–Ω—è–µ—Ç state)
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Ö–æ–¥–∏—Ç —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
4. React **–Ω–µ –æ—á–∏—â–∞–µ—Ç state** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
5. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Å—Ç–∞—ë—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ —Å —Å—Ç–∞—Ä—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
6. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
7. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å **—Å—Ç–∞—Ä—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –≤ state**!

### –†–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω `useEffect` —Å cleanup —Ñ—É–Ω–∫—Ü–∏–µ–π:

```typescript
export default function FilteringPage() {
	const [filters, setFilters] = useState<Filters>(EMPTY_FILTERS)
	const [activeModal, setActiveModal] = useState<string | null>(null)
	const [queryResults, setQueryResults] = useState<any>(null)

	// –û—á–∏—â–∞–µ–º —Ñ–∏–ª—å—Ç—Ä—ã –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
	// (–∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Ö–æ–¥–∏—Ç —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
	useEffect(() => {
		return () => {
			setFilters(EMPTY_FILTERS) // –û—á–∏—â–∞–µ–º —Ñ–∏–ª—å—Ç—Ä—ã
			setQueryResults(null) // –û—á–∏—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
			setActiveModal(null) // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∏
		}
	}, []) // –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π = –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

	return (
		<FilterContext.Provider value={{ filters, setFilters }}>
			{/* –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã */}
		</FilterContext.Provider>
	)
}
```

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

#### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É "–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è"
   ‚Üì
2. FilteringPage –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è
   ‚Üì
3. useEffect –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è (–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞ –Ω–µ –Ω—É–∂–Ω–∞)
   ‚Üì
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã
   ‚Üì
5. filters state –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
   ‚Üì
6. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
   ‚Üì
7. FilteringPage —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è
   ‚Üì
8. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è cleanup —Ñ—É–Ω–∫—Ü–∏—è useEffect (return () => {...})
   ‚Üì
9. setFilters(EMPTY_FILTERS) ‚Üí –æ—á–∏—â–∞–µ–º —Ñ–∏–ª—å—Ç—Ä—ã ‚úÖ
   setQueryResults(null) ‚Üí –æ—á–∏—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã ‚úÖ
   setActiveModal(null) ‚Üí –∑–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª–∏ ‚úÖ
   ‚Üì
10. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è"
    ‚Üì
11. FilteringPage –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –ó–ê–ù–û–í–û (—Å —á–∏—Å—Ç—ã–º state)
    ‚Üì
12. filters === EMPTY_FILTERS ‚úÖ (–Ω–æ–≤—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã, –±–µ–∑ —Å—Ç–∞—Ä—ã—Ö)
```

### –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `useEffect` —Å cleanup —Ñ—É–Ω–∫—Ü–∏–µ–π  
‚úÖ Cleanup —Ñ—É–Ω–∫—Ü–∏—è –æ—á–∏—â–∞–µ—Ç –≤—Å–µ —Ç—Ä–∏ state –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ  
‚úÖ –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π `[]` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —á—Ç–æ —ç—Ñ—Ñ–µ–∫—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ: React Query –∏ useEffect

### –ü–æ—á–µ–º—É React Query —Å–æ–∑–¥–∞–≤–∞–ª –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã?

```typescript
// –ë–µ–∑ enabled –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
const { data } = useQuery({
	queryKey: ['tableSchema', ''], // –ü—É—Å—Ç–æ!
	queryFn: () => ApiMiddleware.getTableSchema(''), // –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å!
})

// –° enabled –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º
const { data } = useQuery({
	queryKey: ['tableSchema', 'products'],
	queryFn: () => ApiMiddleware.getTableSchema('products'),
	enabled: !!tableName, // –ï—Å–ª–∏ tableName –ø—É—Å—Ç–æ, –∑–∞–ø—Ä–æ—Å –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
})
```

### –ü–æ—á–µ–º—É useEffect –Ω—É–∂–µ–Ω –¥–ª—è cleanup?

React –ù–ï –æ—á–∏—â–∞–µ—Ç state –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Ç–æ–º—É —á—Ç–æ:

1. State - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≤ –ø–∞–º—è—Ç–∏
2. –ö–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, –µ–≥–æ –∏–Ω—Å—Ç–∞–Ω—Ü–∏—è —É–¥–∞–ª—è–µ—Ç—Å—è
3. **–ù–æ React **–º–æ–∂–µ—Ç** –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å —Ç–µ–º –∂–µ —Ç–∏–ø–æ–º**
4. –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ - –∏—Å–ø–æ–ª—å–∑—É–π `useEffect` cleanup

```typescript
// –ë–µ–∑ cleanup
useEffect(() => {
	// –≠—Ñ—Ñ–µ–∫—Ç
}, [])
// Cleanup –ù–ï –≤—ã–∑–æ–≤–µ—Ç—Å—è, state –æ—Å—Ç–∞—ë—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏

// –° cleanup
useEffect(() => {
	return () => {
		// Cleanup –∫–æ–¥ - –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
	}
}, [])
```

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ ‚ùå ‚Üí ‚úÖ

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

- –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–°—Ö–µ–º–∞ –ë–î" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç Loading –Ω–∞–≤—Å–µ–≥–¥–∞
- –ö–æ–Ω—Å–æ–ª—å –ø–æ–ª–Ω–∞ –æ—à–∏–±–æ–∫ "Table not found"
- Backend –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –±—ã—Å—Ç—Ä–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è (~100ms)
- –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
- –î–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –û—Å—Ç–∞—é—â–∏–µ—Å—è —Ñ–∏–ª—å—Ç—Ä—ã ‚ùå ‚Üí ‚úÖ

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

1. –î–æ–±–∞–≤–∏—Ç—å WHERE —É—Å–ª–æ–≤–∏–µ: `age > 18` ‚úì
2. –£–¥–∞–ª–∏—Ç—å –µ–≥–æ ‚úì
3. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
4. –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é
5. WHERE —É—Å–ª–æ–≤–∏–µ –≤—Å—ë –µ—â—ë —Ç–∞–º! ‚ùå

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

1. –î–æ–±–∞–≤–∏—Ç—å WHERE —É—Å–ª–æ–≤–∏–µ: `age > 18` ‚úì
2. –£–¥–∞–ª–∏—Ç—å –µ–≥–æ ‚úì
3. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
4. –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é
5. –í—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã —á–∏—Å—Ç—ã–µ! ‚úÖ (—Ç–æ–ª—å–∫–æ –≤—ã–±—Ä–∞–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è)

---

## –§–∞–π–ª—ã –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã

1. **`frontend/src/shared/lib/hooks/useTableSchema.tsx`**

   - –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `enabled: !!tableName`
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ `useCurrentTableSchema()`
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ `queryKey` (–¥–æ–±–∞–≤–ª–µ–Ω `tableName`)

2. **`frontend/src/pages/database-structure/page.tsx`**

   - –ò–∑–º–µ–Ω—ë–Ω –ø–æ—Ä—è–¥–æ–∫ –ª–æ–≥–∏–∫–∏ (—Å–Ω–∞—á–∞–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞, –ø–æ—Ç–æ–º –∑–∞–ø—Ä–æ—Å)
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ `tableNames[0]` ‚Üí `tableNames.data[0]`
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `tableNames.data && tableNames.data.length > 0`
   - –†–∞–∑–¥–µ–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏

3. **`frontend/src/pages/filtering/page.tsx`**
   - –î–æ–±–∞–≤–ª–µ–Ω `useEffect` —Å cleanup —Ñ—É–Ω–∫—Ü–∏–µ–π
   - Cleanup –æ—á–∏—â–∞–µ—Ç `filters`, `queryResults`, `activeModal`

---

## –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã "–°—Ö–µ–º–∞ –ë–î"

```
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∑–∞ < 1 —Å–µ–∫
4. –í–∏–¥–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü –∏ –∏—Ö –ø–æ–ª–µ–π
5. –ù–µ—Ç Loading —Å–ø–∏–Ω–Ω–µ—Ä–∞
6. –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
```

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—á–∏—Å—Ç–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤

```
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è"
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É "products"
3. –î–æ–±–∞–≤—å—Ç–µ WHERE —Ñ–∏–ª—å—Ç—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä: price > 100)
4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–£–¥–∞–ª–∏—Ç—å" —á—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ñ–∏–ª—å—Ç—Ä
5. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∏–ª—å—Ç—Ä —É–¥–∞–ª—ë–Ω (–≤ SQL –Ω–µ—Ç WHERE)
6. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î"
7. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è"
8. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∏–ª—å—Ç—Ä –ù–ï –≤–µ—Ä–Ω—É–ª—Å—è ‚úÖ
9. –¢–∞–±–ª–∏—Ü–∞ "products" –≤—Å—ë –µ—â—ë –≤—ã–±—Ä–∞–Ω–∞ (—ç—Ç–æ OK) ‚úÖ
```

---

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã

### ‚úÖ –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ

- –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–Ω–µ—Ç –ø—É—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤)
- –ë–æ–ª–µ–µ —á–∏—Å—Ç—ã–π UI (–Ω–µ—Ç –¥–æ–ª–≥–æ–π –∑–∞–≥—Ä—É–∑–∫–∏)
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π state management (–æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ)

### ‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ

- –ü—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ **–≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã –æ—á–∏—â–∞—é—Ç—Å—è**
  - –≠—Ç–æ –∏–Ω—Ç–µ–Ω–¥–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ (–¥–ª—è —á–∏—Å—Ç–æ—Ç—ã state)
  - –ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ localStorage –∏–ª–∏ URL params

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–û–±–µ –ø—Ä–æ–±–ª–µ–º—ã –±—ã–ª–∏ –≤—ã–∑–≤–∞–Ω—ã –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –∏ state:

1. **–ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** - React Query –æ—Ç–ø—Ä–∞–≤–ª—è–ª –∑–∞–ø—Ä–æ—Å—ã —Å –ø—É—Å—Ç—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

   - –†–µ—à–µ–Ω–∏–µ: –ø–∞—Ä–∞–º–µ—Ç—Ä `enabled: !!tableName`

2. **–û—Å—Ç–∞—é—â–∏–µ—Å—è —Ñ–∏–ª—å—Ç—Ä—ã** - React –Ω–µ –æ—á–∏—â–∞–ª state –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
   - –†–µ—à–µ–Ω–∏–µ: `useEffect` cleanup —Ñ—É–Ω–∫—Ü–∏—è

–û–±–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª–µ–¥—É—é—Ç –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º React –∏ –æ—á–µ–Ω—å –≤–∞–∂–Ω—ã –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è! üöÄ
